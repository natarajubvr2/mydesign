<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope, $rootScope) {
    $scope.selectedWords = {};
	$scope.isOpen = true;

 // ]]>ðŸ”„<![CDATA[ Reload classification options when policy changes
    $scope.$on('alpha.filter.changed', function (e, alphas) {

        // Clear existing selections
        $scope.selectedWords = {};

        // Refresh widget data from server
        $scope.server.get({ alpha: alphas }).then(function (response) {
            $scope.data.words = response.data.words || [];
        });

        // Notify table that classification filter is cleared
       // $rootScope.$broadcast('words.filter.changed', []);
    });

    $scope.updateWordsFilter = function () {
        var selected = [];

        angular.forEach($scope.selectedWords, function (a, b) {
            if (a) selected.push(b);
        });
console.log('Words selected:', selected);
        $rootScope.$broadcast('words.filter.changed', selected);
    };

	// Clear
    $scope.clearFilter = function () {
        $scope.selectedWords = {};
        $rootScope.$broadcast('words.filter.changed', []);
    };
};]]></client_script>
        <controller_as>c</controller_as>
        <css>.filter-scroll {&#13;
    max-height: 220px;      /* adjust as needed */&#13;
    overflow-y: auto;&#13;
    padding-right: 6px;&#13;
}&#13;
&#13;
/* Optional: smoother scroll */&#13;
.filter-scroll::-webkit-scrollbar {&#13;
    width: 6px;&#13;
}&#13;
&#13;
.filter-scroll::-webkit-scrollbar-thumb {&#13;
    background-color: #c1c1c1;&#13;
    border-radius: 4px;&#13;
}&#13;
</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description>Priority</description>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id/>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Mydesign words</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function () {
   data.words = [];
 var alphaList = (input && input.alpha) ? input.alpha : [];    var gr = new GlideRecord('sys_choice');
    gr.addQuery('name', 'incident');      // table
    gr.addQuery('element', 'u_words');   // field

 // ]]>ðŸ”¥<![CDATA[ DEPENDENCY
    if (alphaList.length > 0) {
        gr.addQuery('dependent_value', 'IN', alphaList.join(','));
    }

    gr.addQuery('inactive', false);
	gr.orderBy('sequence');
    gr.query();
    while (gr.next()) {
        data.words.push({
            value: gr.value.toString(),
            label: gr.label.toString()
        });
    }

})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-02-13 15:43:41</sys_created_on>
        <sys_id>0f13f42147c33e5080626d1f316d439a</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>Mydesign words</sys_name>
        <sys_package display_value="MyDesign" source="x_492360_mydesign">8d9ca96987c825107653fd57dabb3584</sys_package>
        <sys_policy/>
        <sys_scope display_value="MyDesign">8d9ca96987c825107653fd57dabb3584</sys_scope>
        <sys_update_name>sp_widget_0f13f42147c33e5080626d1f316d439a</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-02-13 15:43:58</sys_updated_on>
        <template><![CDATA[<div class="panel panel-default">
  <div class="panel-heading"><b>Filter by Words</b>
  <span class="pull-right">
      <a href="" ng-click="$event.stopPropagation(); clearFilter()">Clear</a>
      &nbsp;
      <i class="fa"
         ng-class="{'fa-chevron-down': isOpen, 'fa-chevron-right': !isOpen}">
      </i>
    </span>
  
  </div>
  <div class="panel-body filter-scroll">
    <div ng-repeat="p in data.words">
      <label>
        <input type="checkbox"
               ng-model="selectedWords[p.value]"
               ng-change="updateWordsFilter()">
        {{p.label}}
      </label>
    </div>
  </div>
</div>
]]></template>
    </sp_widget>
</record_update>
